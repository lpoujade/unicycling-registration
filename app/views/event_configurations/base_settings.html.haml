%h1 Base Settings

= form_for(@event_configuration) do |f|
  = render partial: "/shared/error_messages", object: @event_configuration

  %h3 Registrant Types

  %fieldset
    %legend Registration Types Available

    = check_box_tag :competitor, true, true, disabled: true
    = label_tag :competitor
    %br
    = check_box_tag :noncompetitor, true, true, disabled: true
    = label_tag :noncompetitor
    .info_bubble
      .info Non-Competitors cannot sign up for events
    %br
    = f.check_box :spectators
    = f.label :spectators
    .info_bubble
      .info Spectators need not pay for base-registration items

  = f.label :comp_noncomp_url, "Comp/Non-Comp Explanation"
  = f.url_field :comp_noncomp_url
  .description
    Specify a link which explains the difference between the offered Registration Types
  = link_to 'Test this URL', '#'
  %hr

  %h3 Waiver

  = f.label :waiver_none, "No Waiver"
  = f.radio_button :waiver, 'none'
  %br
  = f.label :waiver_online, "Online Waiver"
  = f.radio_button :waiver, 'online'
  %br
  = f.label :waiver_print, "Print Waiver"
  = f.radio_button :waiver, 'print'

  %p
    %b Online Waiver
    User is required to sign the waiver

  %p
    %b Printed Waiver
    We provide a waiver for the user to print/sign at the event. (available in advance on the website so that children can have their parents sign it)
  = f.label :custom_waiver_text
  = f.text_area :custom_waiver_text, size: "60x12", placeholder: EventConfiguration.default_waiver_text

  %hr

  %h3 Website Style
  = f.label :style_name
  = f.select :style_name, EventConfiguration.style_names

  %hr

  %h3 Contact Details
  = f.label :contact_email
  = f.email_field :contact_email
  .description
    Displayed on the "Help" page

  %hr

  %h3 Unicycling Society of America (USA) Membership Summary

  = f.label :usa_membership_config, "Display USA admin pages"
  = f.check_box :usa_membership_config

  = f.label :usa_individual_expense_item_id
  = f.select :usa_individual_expense_item_id, ExpenseItem.all.map {|ei| [ei.name, ei.id] }, include_blank: true
  = f.label :usa_family_expense_item_id
  = f.select :usa_family_expense_item_id, ExpenseItem.all.map {|ei| [ei.name, ei.id] }, include_blank: true

  %hr

  %h3 Artistic Scoring Mode
  %p
    This chooses whether to eliminate 1 high, 1 low judge during scoring (Small Event), 1 high, 1 low elimination PER JUDGE TYPE during scoring (Large Event).

  = f.label :artistic_score_elimination_mode_naucc, "Small Group"
  = f.check_box :artistic_score_elimination_mode_naucc

  %hr

  %h3 Rulebook

  = f.label :rulebook_url, "Rulebook PDF URL"
  = f.url_field :rulebook_url

  %p
    The current IUF Rulebook can be found at:
    = link_to "https://unicycling.org/files/current-iuf-rulebook.pdf", "https://unicycling.org/files/current-iuf-rulebook.pdf"

  %hr

  %h3 Standard Skill

  %p
    Enabling this feature allows a registrant to submit their standard skill routine with their registration.

  %p
    Note: The Standard Skill Judging system is currently incomplete, and not included in this online system

  = f.label :standard_skill, "Enable Standard Skill Submisssion System"
  = f.check_box :standard_skill

  = f.label :standard_skill_closed_date, "Last day to submit Standard Skill Routines online"
  = f.date_select :standard_skill_closed_date

  = f.submit


  %hr
  %hr
  %table.alternate
    %thead
      %tr
        %th Field
        %th Value
        %th Description
    - languages.each do |lang|
      = f.globalize_fields_for lang do |g|
        %tr
          %th
            = g.label :short_name
            (#{long_language_name(lang)})
          %td= g.text_field :short_name
          %td Used on the Registration page.
        %tr
          %th
            = g.label :long_name
            (#{long_language_name(lang)})
          %td= g.text_field :long_name
        %tr
          %th
            = g.label :location
            (#{long_language_name(lang)})
          %td= g.text_field :location
        %tr
          %th
            = g.label :dates_description
            (#{long_language_name(lang)})
          %td= g.text_field :dates_description
    %tr

    %tr
      %th= f.label :event_url
      %td= f.url_field :event_url
      %td Links from the Menubar logo to this URL.


    %tr
      %th= f.label :start_date
      %td= f.date_select :start_date
      %td This date is used to calculate the "age" of each registrant.
    %tr
      %th= f.label :logo_file
      %td
        = f.file_field :logo_file
        = image_tag(@event_configuration.logo_file.url) if @event_configuration.logo_file?
      %td This logo is displayed at the top of the site.
    %tr
      %th= f.label :currency
      %td= f.text_field :currency
      %td
        For use when printing/displaying currency on the webpage. Defaults to "%u%n USD".
        %br/
        Must be in the form of 'format' from: #{link_to "Rails options{}", "http://api.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html#method-i-number_to_currency"}
    %tr
      %th= f.label :currency_code
      %td= f.text_field :currency_code
      %td For Paypal. Three capital letter code for currency.
    %tr
      %th= f.label :paypal_account
      %td= f.text_field :paypal_account
      %td PayPal "Merchant Account" that will be paid.
    %tr
      %th= f.label :paypal_test
      %td= f.check_box :paypal_test
      %td allow to pretend to receive payment confirmation from paypal
    %tr
      %th= f.label :artistic_closed_date
      %td= f.date_select :artistic_closed_date
      %td Not currently used
    %tr
      %th= f.label :music_submission_end_date
      %td= f.date_select :music_submission_end_date, include_blank: true
      %td Specify the date at which music submissions will no longer be allowed
    %tr
      %th= f.label :usa
      %td= f.check_box :usa
      %td This prioritizes USA and Canada in the Country select-boxes, and causes the state to be displayed
    %tr
      %th= f.label :iuf
      %td= f.check_box :iuf
      %td Enabling this allows IUF membership questions.
    %tr
      %th= f.label :event_sign_up_closed_date
      %td= f.date_select :event_sign_up_closed_date
      %td After this date, only administrators can add events to registrations. (though they can still remove them)
    %tr
      %th= f.label :max_award_place
      %td= f.number_field :max_award_place, {min: 0}
      %td This sets the maximum place to print awards for. (applies to both age group and expert)
    %tr
      %th= f.label :display_confirmed_events
      %td= f.check_box :display_confirmed_events
      %td Enabling this displays the confirmed events/unconfirmed events on the Registrant#summary page.
    %tr
      %th= f.label :test_mode
      %td= f.check_box :test_mode
      %td Enabling this allows any user to become a Super User, and also to "pretend to complete" a payment.
  .actions
    = f.submit
