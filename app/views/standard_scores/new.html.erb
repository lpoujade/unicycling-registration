<h2><%= @competitor %></h2>

<div class="skills">
      <%= form_for @judge do |f| %>
        <table>
          <thead>
          <tr>
            <th rowspan="2">No</th>
            <th rowspan="2">Skill</th>
            <th rowspan="2">Description</th>
            <th colspan="1">Difficulty</th>
            <th colspan="4">Execution</th>
          </tr>
          <tr>
            <th>50% or 100%</th>
            <th>-</th>
            <th>/</th>
            <th>+</th>
            <th>0</th>
          </tr>
          </thead>

          <tbody>
            <% @competitor.registrants.first.standard_skill_routine.standard_skill_routine_entries.each do |skill| %>
              <% difficulty_score = @judge.standard_difficulty_scores.find_by_competitor_id_and_standard_skill_routine_entry_id(@competitor.id, skill.id) %>
              <% execution_score = @judge.standard_execution_scores.find_by_competitor_id_and_standard_skill_routine_entry_id(@competitor.id, skill.id) %>
              <% next if execution_score.nil? or difficulty_score.nil? %>
              <tr>
                <% ssre = execution_score.standard_skill_routine_entry %>
                <td><%= ssre.position %></td>
                <td><%= ssre.skill_number_and_letter %></td>
                <td><%= ssre.description %></td>

                <td>
                <%= f.fields_for :standard_difficulty_scores, difficulty_score do |difficulty_scores_form| %>
                    <%= difficulty_scores_form.text_field :devaluation, :size => 5 %>
                <% end %>
                </td>

                <% # this td-placement allows us to get HTML5 validation to work %>
                <td>
                <%= f.fields_for :standard_execution_scores, execution_score do |scores_form| %>
                    <%= scores_form.text_field :wave, :size => 5 %></td>
                    <td><%= scores_form.text_field :line, :size => 5 %></td>
                    <td><%= scores_form.text_field :cross, :size => 5 %></td>
                    <td><%= scores_form.text_field :circle, :size => 5 %>
                <% end %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
        <%= f.submit %>
      <% end %>
</div>
