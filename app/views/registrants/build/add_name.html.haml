= form_for(setup_registrant_choices(@registrant)) do |f|
  - if @registrant.errors.any?
    #error_explanation
      %h2
        = pluralize(@registrant.errors.count, "error")
        prohibited this registrant from being saved:
      %ul
        - @registrant.errors.each do |attribute,error_message|
          - next if attribute == :gender_male
          - next if attribute == :gender_female
          - next if "#{attribute}" == "registrant_event_sign_ups.signed_up"
          - next if "#{attribute}" == "registrant_event_sign_ups.event_category_id"
          - if "#{attribute}" == "registrant_event_sign_ups.base"
            %li= error_message
          - else
            %li= @registrant.errors.full_message(attribute, error_message )

  .data_block
    = render partial: "/registrants/base_details", locals: {f: f}


    = render :partial => "registration_periods/list", :locals => {:competitor => @registrant.competitor }
    .data_block
      = render :partial => "/registrants/contact_detail", :locals => { :reg_f => f, :other_registrant => @other_registrant }
    - if @has_online_waiver
      %br
      .data_block{:style => "margin-top:20px;"}
        = render :partial => "online_waiver", :locals => {:f => f, :registrant => @registrant }
  .actions
    - if @registrant.competitor
      = f.submit t('.continue'), :class => "competitor registration_button"
    - else
      = f.submit t('.continue'), :class => "noncompetitor registration_button"
