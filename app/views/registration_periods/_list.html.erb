<fieldset class="registration_period_block">
  <legend><%= competitor ? t(".competitor_registration_cost") : t(".noncompetitor_registration_cost") %></legend>
    <table>
      <% closed_date = EventConfiguration.closed_date %>
        <% RegistrationPeriod.includes(:competitor_expense_item).includes(:noncompetitor_expense_item).includes(:translations).all.each do |period| %>
          <% if period.past_period? %>
            <tr class="past_reg_period">
          <% elsif period.current_period? %>
            <tr class="current_reg_period">
          <% else %>
            <tr>
          <% end %>
                <td><%= period.name %></td>
                <td><%= t(".from") %></td>
                <td><%= l period.start_date, format: :registration_date_format %></td>
                <td><%= t(".to") %></td>
                <td><%= l period.end_date, format: :registration_date_format %></td>
                <td><b>
                <% if competitor %>
                  <%= print_formatted_currency(period.competitor_expense_item.cost) %>
                <% else %>
                  <%= print_formatted_currency(period.noncompetitor_expense_item.cost) %>
                <% end %>
                </b></td>
            </tr>
            <% if period.end_date == closed_date %>
              <tr>
                <td colspan="6" class="registration_closes_notice"><%= t(".online_registration_closes") %> <%= l closed_date, format: :registration_date_format %></td>
              </tr>
            <% end %>
        <% end %>
    </table>
</fieldset>
